<html>
<head>
  <!-- Initialize a global WBK function -->
  <script src="https://cdn.rawgit.com/maxlath/wikidata-sdk/dist/dist/wikibase-sdk.min.js"></script>
  <!-- Initialize a global wdk object using the WBK object -->
  <script src="https://cdn.rawgit.com/maxlath/wikidata-sdk/dist/dist/wikidata-sdk.min.js"></script>
</head>

<body>
  <pre id="output"></pre>
  <script>
                                                       //backtick = multiline string, querry inserted inside (this one is for PubChem IDs)
    query = `							
SELECT DISTINCT ?drug ?drugLabel ?ID
WHERE
{
  VALUES ?idProp { wdt:P662 }
  ?drug wdt:P31* wd:Q12140 .
  ?drug ?idProp ?ID .

  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
}
`                                                                //end of query
    const url = wdk.sparqlQuery(query)					                 //preparing to send querry to webservice
    async function main () {
      const response = await fetch(url)					                 //sends querry (in string) to webservice
      const results = await response.json()			               	//gives body of http in json format
      const simpleResults = wdk.simplify.sparqlResults(results) 
      document.getElementById('output').innerHTML =             //simplifys JSON to not display uri, etc.
        JSON.stringify(simpleResults, undefined, 2);
    }
    main()
  </script>
</body>
